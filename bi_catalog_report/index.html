<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BI Catalog Viewer</title>
    <style>
        :root {
            --bg-dark: #0f1115;
            --bg-card: #181b21;
            --bg-hover: #22262e;
            --accent-primary: #7c3aed;
            /* Violet */
            --accent-secondary: #2563eb;
            /* Blue */
            --text-main: #e2e8f0;
            --text-muted: #94a3b8;
            --border-color: #2d3748;
            --success: #10b981;
            --warning: #f59e0b;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            height: 100vh;
            overflow: hidden;
            display: flex;
        }

        /* --- Sidebar --- */
        .sidebar {
            width: 280px;
            background-color: var(--bg-card);
            border-right: 1px solid var(--border-color);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .stat-box {
            background-color: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 0.75rem;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-main);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .search-box {
            background-color: var(--bg-dark);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.75rem;
            color: var(--text-main);
            width: 100%;
            outline: none;
            transition: border-color 0.2s;
        }

        .search-box:focus {
            border-color: var(--accent-primary);
        }

        /* --- Main Content --- */
        .main-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        /* --- Cards --- */
        .card {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            position: relative;
            /* Para o overlay funcionar */
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border-color: var(--accent-primary);
        }

        .card-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-bottom: 1px solid var(--border-color);
            background-color: #000;
        }

        /* Overlay de Objetivo */
        .card-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 180px;
            /* Mesma altura da imagem */
            background-color: rgba(15, 17, 21, 0.95);
            padding: 1.5rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }

        .card:hover .card-overlay {
            opacity: 1;
        }

        .overlay-text {
            font-size: 0.9rem;
            line-height: 1.5;
            color: #fff;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 6;
            /* Limita número de linhas */
            -webkit-box-orient: vertical;
        }

        .overlay-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent-primary);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .card-body {
            padding: 1rem;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .card-title {
            font-weight: 600;
            font-size: 1rem;
            line-height: 1.4;
            color: var(--text-main);
        }

        .card-meta {
            font-size: 0.8rem;
            color: var(--text-muted);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .badge {
            background-color: rgba(37, 99, 235, 0.1);
            color: #60a5fa;
            padding: 0.25rem 0.5rem;
            border-radius: 99px;
            font-size: 0.7rem;
            font-weight: 500;
        }


        /* --- Modal --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--bg-card);
            width: 90%;
            height: 90%;
            border-radius: 16px;
            display: flex;
            overflow: hidden;
            border: 1px solid var(--border-color);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .modal-viewer {
            flex: 3;
            background-color: #000;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .modal-img {
            max-width: 100%;
            max-height: 85%;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .modal-nav {
            margin-top: 1rem;
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            max-width: 100%;
            padding: 0.5rem;
        }

        .nav-thumb {
            height: 50px;
            width: 80px;
            object-fit: cover;
            border-radius: 4px;
            cursor: pointer;
            border: 2px solid transparent;
            opacity: 0.6;
        }

        .nav-thumb.active {
            border-color: var(--accent-primary);
            opacity: 1;
        }

        .modal-sidebar {
            flex: 1;
            background-color: var(--bg-dark);
            border-left: 1px solid var(--border-color);
            padding: 1.5rem;
            overflow-y: auto;
            min-width: 350px;
        }

        .modal-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .modal-subtitle {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .info-section {
            margin-bottom: 1.5rem;
        }

        .info-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .info-pill {
            display: inline-block;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            font-size: 0.8rem;
            margin-right: 0.4rem;
            margin-bottom: 0.4rem;
        }

        .info-text {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #d1d5db;
        }

        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            background: none;
            border: none;
            color: #fff;
            font-size: 2rem;
            cursor: pointer;
            z-index: 10;
        }

        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 1rem;
            cursor: pointer;
            font-size: 1.5rem;
            border-radius: 50%;
            transition: background 0.2s;
        }

        .nav-arrow:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .prev-arrow {
            left: 1rem;
        }

        .next-arrow {
            right: 1rem;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: #374151;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4b5563;
        }
    </style>
</head>

<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <span>⚡ BI Catalog</span>
        </div>

        <input type="text" id="searchInput" class="search-box" placeholder="Buscar dashboards..."
            oninput="filterCatalogs()">

        <div class="stats-container">
            <div class="stat-box">
                <div class="stat-value" id="statsTotal">0</div>
                <div class="stat-label">Dashboards</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="statsPages">0</div>
                <div class="stat-label">Páginas</div>
            </div>
        </div>

        <div
            style="margin-top: auto; font-size: 0.8rem; color: var(--text-muted); text-align: center; border-top: 1px solid var(--border-color); padding-top: 1rem;">
            Construído com ☕ nas horas vagas.
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="grid-container" id="cardsGrid">
            <!-- Cards serão injetados aqui -->
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="if(event.target === this) closeModal()">
        <button class="close-btn" onclick="closeModal()">×</button>
        <div class="modal-content">
            <div class="modal-viewer">
                <button class="nav-arrow prev-arrow" onclick="prevPage()">❮</button>
                <img id="modalMainImage" class="modal-img" src="" alt="Dashboard Screenshot">
                <button class="nav-arrow next-arrow" onclick="nextPage()">❯</button>

                <div class="modal-nav" id="modalThumbs">
                    <!-- Thumbnails -->
                </div>
            </div>

            <div class="modal-sidebar">
                <div class="modal-header">
                    <h2 class="modal-title" id="modalTitle">Título</h2>
                    <div class="modal-subtitle" id="modalDomain">Domínio</div>
                </div>

                <div class="info-section">
                    <div class="info-label">Objetivo</div>
                    <p class="info-text" id="modalObjective">...</p>
                </div>

                <div class="info-section">
                    <div class="info-label">Perguntas Respondidas</div>
                    <ul class="info-text" id="modalQuestions" style="padding-left: 1.2rem; list-style-type: disc;">
                        <!-- List Items -->
                    </ul>
                </div>

                <div class="info-section">
                    <div class="info-label">Indicadores Chave</div>
                    <div id="modalMetrics">
                        <!-- Pills -->
                    </div>
                </div>

                <div class="info-section">
                    <div class="info-label">Visualização Original</div>
                    <a id="modalLink" href="#" target="_blank"
                        style="color: var(--accent-secondary); text-decoration: none;">Abrir no Power BI ↗</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // THIS VARIABLE WILL BE REPLACED BY PYTHON
        window.CATALOG_DATA = [{"run_id": "20260117_174515", "url": "https://app.fabric.microsoft.com/view?r=eyJrIjoiYTA3ZDQ3ZmQtYzFlMi00YTYyLTgwNjgtYWU4OGU0YzNmYzc1IiwidCI6IjE2ZGVlZGU4LTc5ZTktNGUzMy05OWU2LTlkOGQzOTQyZDc5NiIsImMiOjEwfQ%3D%3D", "timestamp": "2026-01-17T17:45:15.582807", "navigation_structure": {"nav_reflection": "A análise não identificou um rodapé de navegação nativo do Power BI (native_footer) na parte inferior da tela. Em vez disso, foi observada uma barra de navegação vertical personalizada no lado esquerdo do relatório. Esta barra contém um único ícone visível, que parece ser um botão 'Home', indicando um sistema de navegação do tipo lista à esquerda. Este é o principal método de navegação entre as páginas do relatório. Os botões 'YTD' e 'MTD' no canto superior direito foram desconsiderados, pois funcionam como filtros de dados e não como navegação principal.", "nav_type": "left_list", "page_count_visual": null, "targets": [{"label": "Home", "x": 0.042, "y": 0.046}], "_meta_run_id": "20260117_174342"}, "pages": [{"id": 0, "label": "Home", "filename": "00_home.png", "analysis": {"titulo_painel": "Visão Geral de Performance Financeira", "objetivo_macro": "Monitorar a performance financeira e de vendas da empresa, permitindo a análise de receita, lucro, custo e margem em comparação com o ano anterior e detalhamento por dimensões de negócio.", "perguntas_respondidas": ["Qual a performance financeira geral (receita, lucro, custo) e sua variação em relação ao ano anterior?", "Como a receita total é decomposta entre as diferentes regiões e segmentos de mercado?", "Quais são os principais segmentos e regiões em termos de contribuição para a receita?", "Qual é a tendência histórica de vendas e lucro ao longo do tempo?", "Quais são os produtos com maior volume de vendas?"], "dominio_negocio": "Financeiro", "elementos_visuais": "Painel composto por cartões de KPI, um gráfico de decomposição da receita por região e segmento, gráficos de barras comparativos, um gráfico de área para análise de tendências históricas e um gráfico de barras horizontais para o ranking de produtos.", "filtros_visiveis": ["Período (YTD/MTD)", "Região", "Segmento", "Métrica de Tendência (Vendas/Lucro)"], "principais_indicadores": ["Receita Total", "Lucro Total", "Margem de Lucro", "Custo Total", "Receita por Segmento", "Receita por Região"], "publico_sugerido": "Executivo"}, "screenshot_rel_path": "images/20260117_174515_00_home.png"}]}, {"run_id": "20260117_125442", "url": "https://app.fabric.microsoft.com/view?r=eyJrIjoiYTk2OTcyMWQtOGNmNC00NGJiLThjODMtMGFkN2JjNzJkYzBhIiwidCI6ImE5NDUyNTg2LTJmNGMtNGNiMS04ZDJlLTI2ODkyODllZTcyNiIsImMiOjl9", "timestamp": "2026-01-17T12:54:42.593901", "navigation_structure": {"nav_reflection": "O método de navegação principal identificado é o rodapé nativo do Power BI (native_footer), pois está claramente visível na parte inferior da tela com o indicador de página ('1 de 4') e as setas de navegação. Conforme as regras de priorização, a presença deste rodapé o torna o método principal. Embora exista um segundo método de navegação personalizado no formato de uma lista à esquerda (left_list) com os botões 'Inventory Overview', 'Category Summary', etc., ele é considerado secundário de acordo com as instruções.", "nav_type": "native_footer", "page_count_visual": "1 de 4", "targets": [{"label": "Next Page Button", "x": 0.521, "y": 0.98}], "_meta_run_id": "20260117_125256"}, "pages": [{"id": 0, "label": "Home", "filename": "00_home.png", "analysis": {"titulo_painel": "Inventory Overview - Status Update", "objetivo_macro": "Monitorar a saúde e o status geral do inventário, fornecendo uma visão consolidada dos principais indicadores de estoque e produtos.", "perguntas_respondidas": ["Qual é a tendência mensal do número total de SKUs em estoque?", "Qual a proporção de produtos que necessitam de reposição imediata versus os que não necessitam?", "Como os SKUs estão distribuídos por categoria e por nível de estoque (alto, médio, baixo)?", "Quais são os 10 produtos mais valiosos em estoque e quando foi a última data de reposição de cada um?", "Qual é o valor total, a quantidade, o preço médio e o tempo médio de entrega (lead time) do inventário?"], "dominio_negocio": "Logística", "elementos_visuais": "Composto por uma fileira de cartões de KPIs, um gráfico de linha para análise de tendência temporal, dois gráficos de rosca para distribuição percentual por status, um gráfico de barras empilhadas para análise categórica e uma tabela detalhada com o ranking de produtos.", "filtros_visiveis": ["Year", "Month", "Status", "Warehouse"], "principais_indicadores": ["Total SKUs", "Stock Qty (Quantidade em Estoque)", "Stock Value (Valor do Estoque)", "Avg Price (Preço Médio)", "Avg Leadtimedays (Dias de Lead Time Médio)", "ReOrder Status (Status de Reposição)", "Stock Level (Nível de Estoque)"], "publico_sugerido": "Analista de Mercado"}, "screenshot_rel_path": "images/20260117_125442_00_home.png"}, {"id": 1, "label": "Next Page (1/3)", "filename": "01_target.png", "analysis": {"titulo_painel": "Resumo de Inventário por Categoria de Produto", "objetivo_macro": "Fornecer uma visão consolidada da saúde do inventário, segmentada por categoria de produto, para apoiar decisões táticas e operacionais de reposição e gestão de estoque.", "perguntas_respondidas": ["Quais categorias de produto possuem maior risco de ruptura de estoque (out-of-stock)?", "Qual a distribuição de produtos por status de validade (curta, média, longa) em cada categoria?", "Existe uma correlação entre o tempo de entrega do fornecedor e os dias de validade dos produtos?", "Como está a performance do inventário em relação ao mês anterior para cada categoria?", "Quais categorias têm a maior quantidade de itens que necessitam de reposição imediata?"], "dominio_negocio": "Logística e Cadeia de Suprimentos", "elementos_visuais": "Composto por cartões de KPIs para cada categoria de produto, gráficos de barras agrupadas para análise de status de reposição, nível de estoque e validade, e um gráfico de dispersão que correlaciona o tempo de entrega do fornecedor com os dias de validade do produto.", "filtros_visiveis": ["Ano", "Mês", "Status do Estoque", "Armazém"], "principais_indicadores": ["Quantidade de Itens por Categoria", "Variação Percentual Mensal (MoM)", "Percentual Fora de Estoque", "Percentual de SKUs Abaixo do Ponto de Reposição", "Contagem de Produtos por Status de Validade", "Média de Dias de Lead Time", "Média de Dias para Vencimento"], "publico_sugerido": "Analista de Cadeia de Suprimentos"}, "screenshot_rel_path": "images/20260117_125442_01_target.png"}, {"id": 2, "label": "Next Page (2/3)", "filename": "02_target.png", "analysis": {"titulo_painel": "Visão Geral de Inventário - Ações por Produto", "objetivo_macro": "Facilitar a tomada de decisão operacional sobre a gestão de estoque, fornecendo um diagnóstico e ações recomendadas para cada produto com base em seu status atual.", "perguntas_respondidas": ["Quais produtos exigem ação imediata devido a problemas com fornecedor, estoque baixo ou excessivo?", "Quais são as ações corretivas sugeridas para normalizar os níveis de estoque de um produto específico?", "Existem produtos com movimentação lenta que precisam de promoções ou outras ações de estímulo?", "Qual o status de expiração dos produtos em estoque para priorizar a venda?", "Para um produto com problema de fornecedor, qual o tempo de reposição estimado e quais as alternativas?"], "dominio_negocio": "Logística e Gestão de Estoque", "elementos_visuais": "Matriz detalhada que lista produtos individualmente e apresenta, em colunas, o diagnóstico e as ações recomendadas para diferentes categorias de status de inventário (fornecedor, nível de estoque, movimentação, expiração).", "filtros_visiveis": ["Category", "Expiry Category", "Country", "Stock Level", "Year", "Month", "Stock Status", "Warehouse"], "principais_indicadores": ["Status do Fornecedor", "Status do Nível de Estoque (Baixo, Saudável, Excesso)", "Status de Movimentação de Estoque (Lento, Saudável)", "Categoria de Expiração", "Unidades em Estoque", "Dias de Cobertura de Estoque", "Tempo Estimado de Reposição"], "publico_sugerido": "Operacional"}, "screenshot_rel_path": "images/20260117_125442_02_target.png"}, {"id": 3, "label": "Next Page (3/3)", "filename": "03_target.png", "analysis": {"titulo_painel": "Visão Geral de Inventário - Avaliação de Valor por Região", "objetivo_macro": "Avaliar a composição e o valor do inventário, com foco na identificação de estoque obsoleto (dead stock) por região e categoria de produto, a fim de otimizar a gestão e reduzir perdas financeiras.", "perguntas_respondidas": ["Quais países concentram o maior valor ou quantidade de SKUs em estoque?", "Qual é a proporção de estoque ativo versus estoque obsoleto por categoria de produto?", "Qual o valor total do inventário e quanto dele é considerado obsoleto?", "Como a distribuição do estoque se altera ao filtrar por um armazém ou período específico?"], "dominio_negocio": "Logística e Gestão de Estoque", "elementos_visuais": "Estrutura composta por cartões de KPIs totalizadores na parte superior, um gráfico de barras horizontal para ranqueamento de países por indicador selecionável, e gráficos de barras verticais para análise comparativa entre estoque ativo e obsoleto por categoria, tanto em volume (SKUs) quanto em valor financeiro.", "filtros_visiveis": ["Ano", "Mês", "Status do Estoque", "Armazém", "Seleção de KPI (para ranking de países)"], "principais_indicadores": ["Valor Total do Inventário", "Total de SKUs", "Valor do Estoque Obsoleto", "SKUs de Estoque Obsoleto", "Valor do Estoque Ativo", "SKUs de Estoque Ativo"], "publico_sugerido": "Analista de Negócios / Operacional"}, "screenshot_rel_path": "images/20260117_125442_03_target.png"}]}, {"run_id": "20260117_125222", "url": "https://app.fabric.microsoft.com/view?r=eyJrIjoiNDUxNjdkM2MtNjM2Yi00MmM3LWIzZmYtZjYzMzcxYTMwM2E5IiwidCI6ImE5NDUyNTg2LTJmNGMtNGNiMS04ZDJlLTI2ODkyODllZTcyNiIsImMiOjl9", "timestamp": "2026-01-17T12:52:22.321486", "navigation_structure": {"nav_reflection": "A barra de navegação nativa do Power BI é claramente visível na parte inferior da tela, contendo o indicador de página '1 de 3' e setas de navegação. Conforme as regras de prioridade, este é identificado como o método de navegação principal. Embora existam outros elementos de navegação potenciais, como uma lista de ícones à esquerda e abas no topo ('Insights', 'Recommendations'), o rodapé nativo tem a precedência mais alta.", "nav_type": "native_footer", "page_count_visual": "1 de 3", "targets": [{"label": "Next Page Button", "x": 0.51, "y": 0.985}], "_meta_run_id": "20260117_125056"}, "pages": [{"id": 0, "label": "Home", "filename": "00_home.png", "analysis": {"titulo_painel": "Sales and Profit Performance Overview", "objetivo_macro": "Monitorar a performance comercial e financeira, focando em indicadores de vendas e lucratividade, e permitindo a análise comparativa com o ano anterior.", "perguntas_respondidas": ["Qual o desempenho de vendas, lucro e margem em comparação com o ano anterior?", "Quais regiões, categorias de produtos e modos de envio possuem maior representatividade nas vendas?", "Qual é a sazonalidade das vendas ao longo dos meses?", "Como os clientes se distribuem por segmento?", "Qual a tendência de um indicador ao longo do tempo para um período selecionado?"], "dominio_negocio": "Vendas", "elementos_visuais": "Layout composto por cartões de KPIs no topo, um gráfico de barras horizontal para análise regional, gráficos de rosca para distribuição de vendas e clientes, um gráfico de colunas para evolução mensal e um gráfico de área para análise de tendência em um período selecionado.", "filtros_visiveis": ["Período de Análise (dias)", "Métrica de Análise Regional (Vendas, Lucro, Margem, Pedidos)"], "principais_indicadores": ["Total Sales", "Total Profit", "Profit Margin", "Orders", "Total Customers", "Variação vs Ano Anterior (PY)"], "publico_sugerido": "Executivo, Analista de Mercado"}, "screenshot_rel_path": "images/20260117_125222_00_home.png"}, {"id": 1, "label": "Next Page (1/2)", "filename": "01_target.png", "analysis": {"titulo_painel": "Ship Mode Performance Overview", "objetivo_macro": "Monitorar e analisar a eficiência operacional e o resultado financeiro das diferentes modalidades de entrega (Ship Mode), correlacionando-as com vendas, lucratividade e devoluções.", "perguntas_respondidas": ["Qual modalidade de envio (Ship Mode) é a mais utilizada para cada categoria de produto?", "Como o tempo médio de entrega varia sazonalmente ao longo do ano?", "Qual é a relação entre a modalidade de envio, a lucratividade e o volume de devoluções?", "Como a performance de vendas se distribui trimestralmente entre os diferentes vendedores?", "Quais modalidades de entrega atendem aos diferentes prazos de entrega (24 horas, 1-2 dias, etc.)?"], "dominio_negocio": "Logística e Vendas", "elementos_visuais": "Painel composto por cartões de KPIs, gráficos de rosca para análise de composição percentual, gráficos de barras para comparação de volumes, um gráfico de linha para análise de tendência temporal e uma tabela detalhada que sumariza os principais indicadores por modalidade de envio.", "filtros_visiveis": ["Sales People", "Product Category (na legenda do gráfico)", "Métrica de Vendas (Total Sales, Total Profit, Profit Margin, Orders)"], "principais_indicadores": ["Total Sales", "Avg Delivery Days", "Total Customers", "Return Insights", "Total Profit", "Profit Margin", "Orders"], "publico_sugerido": "Analista de Negócios e Gestor de Operações"}, "screenshot_rel_path": "images/20260117_125222_01_target.png"}, {"id": 2, "label": "Next Page (2/2)", "filename": "02_target.png", "analysis": {"titulo_painel": "Geographic Performance Overview", "objetivo_macro": "Monitorar e analisar a performance de vendas e devoluções por região geográfica e segmento de cliente.", "perguntas_respondidas": ["Quais países lideram em volume de vendas e lucro?", "Qual o desempenho de vendas por país para cada segmento de cliente (Consumidor, Corporativo, etc.)?", "Qual é a tendência mensal da taxa de devolução de pedidos ao longo do ano?", "Existe alguma correlação entre o modo de envio (Ship Mode) e a taxa de devolução?", "Como o número total de clientes e o volume de devoluções se comparam com o período anterior?"], "dominio_negocio": "Vendas", "elementos_visuais": "Composto por cartões de KPIs totalizadores, um gráfico de linha para análise de tendência mensal, uma tabela matriz para detalhamento de métricas por país e segmento, e um gráfico de dispersão para análise de correlação entre o modo de envio e a taxa de devolução.", "filtros_visiveis": ["Métrica na tabela (Total Sales, Total Profit, Profit Margin, Orders)"], "principais_indicadores": ["Total Customers", "Return Insights", "Countries", "Products", "Return Rate", "Total Sales", "Total Profit", "Profit Margin", "Unique Orders"], "publico_sugerido": "Analista de Vendas"}, "screenshot_rel_path": "images/20260117_125222_02_target.png"}]}, {"run_id": "20260117_125042", "url": "https://app.fabric.microsoft.com/view?r=eyJrIjoiNDJjZTYzNDMtNDc0Mi00NGI5LTljOTMtNGNmYjNjYWQxYTk0IiwidCI6ImQ4ZTFiMDVlLTcwYWEtNGVmNy1iODc4LTQ2NmI2ODhmOTUyZiJ9", "timestamp": "2026-01-17T12:50:42.598040", "navigation_structure": {"nav_reflection": "A barra de rodapé nativa do Power BI é claramente visível na parte inferior da tela, contendo a contagem de páginas '1 de 4' e setas de navegação. De acordo com as instruções, este é o método de navegação principal e tem prioridade sobre outros tipos. Portanto, o nav_type foi definido como 'native_footer'. Embora exista um menu de navegação personalizado no lado esquerdo (com SUMMARY, MARKET, etc.), ele é considerado secundário devido à presença do rodapé nativo. O único alvo, conforme solicitado, é o botão de próxima página ('>').", "nav_type": "native_footer", "page_count_visual": "1 de 4", "targets": [{"label": "Next Page Button", "x": 0.524, "y": 0.982}], "_meta_run_id": "20260117_124819"}, "pages": [{"id": 0, "label": "Home", "filename": "00_home.png", "analysis": {"titulo_painel": "Financial Performance | Summary", "objetivo_macro": "Monitorar a performance financeira e de vendas, permitindo a análise comparativa com o ano anterior e a exploração de resultados por diferentes dimensões de negócio.", "perguntas_respondidas": ["Qual a performance financeira geral (Vendas, Custo, Lucro) em comparação com o ano anterior?", "Qual a evolução mensal das vendas e sua comparação com o período homólogo anterior?", "Quais são os principais estados em volume de vendas e qual sua performance relativa ao ano passado?", "Como as vendas se decompõem por segmento, categoria e região?", "Qual o volume total de pedidos e sua variação anual?"], "dominio_negocio": "Financeiro e Vendas", "elementos_visuais": "O painel é composto por cartões de KPIs na parte superior com minigráficos de tendência, seguidos por uma análise de decomposição de vendas, um gráfico de colunas para evolução mensal, um ranking de estados em barras horizontais e um mapa geográfico para distribuição espacial dos resultados.", "filtros_visiveis": ["Ano", "Segmento", "Categoria", "Região"], "principais_indicadores": ["Vendas (Sales)", "Custo (Cost)", "Lucro (Profit)", "Quantidade de Pedidos (Order)", "Comparativo vs Ano Anterior (LY)", "Variação Percentual vs Ano Anterior"], "publico_sugerido": "Executivo"}, "screenshot_rel_path": "images/20260117_125042_00_home.png"}, {"id": 1, "label": "Next Page (1/3)", "filename": "01_target.png", "analysis": {"titulo_painel": "Performance Financeira | Análise de Mercado", "objetivo_macro": "Fornecer uma visão consolidada do desempenho financeiro e de mercado, permitindo a análise de vendas, custos, lucratividade e o comportamento dos principais segmentos e clientes.", "perguntas_respondidas": ["Qual a evolução mensal das vendas para cada segmento de negócio?", "Quais são os principais clientes em volume de vendas no período selecionado?", "Qual o desempenho de vendas de cada segmento em comparação com o ano anterior?", "Existe uma correlação direta entre o volume de vendas e a lucratividade por cliente?", "Como a performance de vendas, custo e lucro se compara com o mesmo período do ano anterior?"], "dominio_negocio": "Vendas e Finanças", "elementos_visuais": "O painel é estruturado com cartões de KPIs na parte superior, um gráfico de barras empilhadas para análise temporal de vendas por segmento, um ranking de clientes em gráfico de barras horizontal, uma tabela detalhada da performance por segmento com variação anual (YoY) e um gráfico de dispersão que correlaciona vendas e lucro.", "filtros_visiveis": ["Ano", "Segmento", "Categoria", "Região"], "principais_indicadores": ["Vendas (Sales)", "Custo (Cost)", "Lucro (Profit)", "Pedidos (Orders)", "Valor Médio do Pedido (Avg. Order)", "Variação vs Ano Anterior (% vs LY)"], "publico_sugerido": "Executivo, Analista de Mercado"}, "screenshot_rel_path": "images/20260117_125042_01_target.png"}, {"id": 2, "label": "Next Page (2/3)", "filename": "02_target.png", "analysis": {"titulo_painel": "Financial Performance | Product Analysis", "objetivo_macro": "Analisar a performance financeira e de vendas com foco no desempenho de produtos e categorias.", "perguntas_respondidas": ["Quais são os produtos e sub-categorias com maior volume de vendas?", "Qual é a tendência de vendas ao longo do tempo e como ela se compara com o ano anterior?", "Existe correlação entre o volume de vendas e a lucratividade de cada produto?", "Como a performance de vendas, custo e lucro varia entre diferentes segmentos, categorias e regiões?", "Qual o desempenho financeiro geral (Vendas, Custo, Lucro) em comparação com o período anterior?"], "dominio_negocio": "Vendas", "elementos_visuais": "Composto por cartões de KPIs na parte superior, um gráfico de tendência temporal (linha e barras), um ranking de produtos em gráfico de barras horizontais, uma tabela de desempenho por sub-categoria e um gráfico de dispersão para correlacionar vendas e lucro.", "filtros_visiveis": ["Ano", "Segmento", "Categoria", "Região"], "principais_indicadores": ["Sales (Vendas)", "Cost (Custo)", "Profit (Lucro)", "Orders (Pedidos)", "Avg. Order (Valor Médio do Pedido)", "Variação vs Ano Anterior"], "publico_sugerido": "Analista de Vendas"}, "screenshot_rel_path": "images/20260117_125042_02_target.png"}, {"id": 3, "label": "Next Page (3/3)", "filename": "03_target.png", "analysis": {"titulo_painel": "Performance Financeira | Análise de Transações", "objetivo_macro": "Fornecer uma visão detalhada e granular de cada transação individual, permitindo a análise e auditoria dos dados financeiros no nível mais baixo.", "perguntas_respondidas": ["Quais são os detalhes financeiros (vendas, custo, lucro) de uma ordem específica?", "Quais transações geraram prejuízo para um determinado segmento de cliente ou categoria de produto?", "É possível consultar os dados de uma transação específica a partir do seu ID?", "Qual o detalhamento das transações por cliente, produto e localidade para um período selecionado?"], "dominio_negocio": "Financeiro", "elementos_visuais": "Uma tabela detalhada que exibe dados transacionais linha a linha, com colunas para identificadores, atributos de negócio e métricas financeiras. Inclui indicadores visuais (semáforos) para destacar a lucratividade de cada transação e uma barra de busca para ordens específicas.", "filtros_visiveis": ["Ano | Mês", "Segmento", "Categoria", "Região", "ID do Pedido"], "principais_indicadores": ["Sales (Vendas)", "Cost (Custo)", "Quantity Sold (Quantidade Vendida)", "Profit (Lucro)", "Profit% (Percentual de Lucro)"], "publico_sugerido": "Analista de Negócios / Financeiro"}, "screenshot_rel_path": "images/20260117_125042_03_target.png"}]}, {"run_id": "20260117_124925", "url": "https://app.fabric.microsoft.com/view?r=eyJrIjoiMzZkNDY0MmUtNDRmNS00MjQ1LTkyMjctYTIzZTkzY2ZkMjA2IiwidCI6IjE2ZGVlZGU4LTc5ZTktNGUzMy05OWU2LTlkOGQzOTQyZDc5NiIsImMiOjEwfQ%3D%3D", "timestamp": "2026-01-17T12:49:25.039945", "navigation_structure": {"nav_reflection": "A barra de rodapé nativa do Power BI é claramente visível na parte inferior da tela, exibindo o contador '1 de 3' e as setas de navegação. De acordo com as regras de prioridade, este é o método de navegação principal a ser relatado. Além disso, há um sistema de navegação secundário no lado esquerdo com botões ('Summary', 'Media Analytics', 'Target Audience'), que seria classificado como 'left_list', mas o rodapé nativo tem precedência.", "nav_type": "native_footer", "page_count_visual": "1 de 3", "targets": [{"label": "Next Page Button", "x": 0.491, "y": 0.982}], "_meta_run_id": "20260117_124806"}, "pages": [{"id": 0, "label": "Home", "filename": "00_home.png", "analysis": {"titulo_painel": "Resumo de Performance de Mídia Digital", "objetivo_macro": "Monitorar a performance e o retorno sobre o investimento (ROI) das campanhas de mídia digital, consolidando os principais indicadores de custo, engajamento e receita.", "perguntas_respondidas": ["Qual o retorno sobre o investimento em publicidade (ROAS) para o período e canais selecionados?", "Como o investimento em mídia (Spend) está distribuído entre as diferentes regiões geográficas?", "Qual canal de mídia digital apresenta a melhor performance de conversão ao longo do tempo?", "Qual é o custo por clique (CPC) médio das campanhas?", "Qual a receita total e o volume de cliques gerados pelas campanhas?"], "dominio_negocio": "Marketing", "elementos_visuais": "Layout composto por cartões de KPIs na parte superior, um gráfico de barras horizontal para análise de investimento por região, e um gráfico de área multissérie para comparação da performance de conversão entre diferentes canais ao longo do tempo.", "filtros_visiveis": ["Month", "Channels", "Day/Month (no gráfico de conversão)"], "principais_indicadores": ["Spend (Investimento)", "Clicks", "Revenue (Receita)", "CPC (Custo por Clique)", "ROAS (Retorno sobre Investimento em Publicidade)", "Conversion (Conversão)"], "publico_sugerido": "Analista de Mercado"}, "screenshot_rel_path": "images/20260117_124925_00_home.png"}, {"id": 1, "label": "Next Page (1/2)", "filename": "01_target.png", "analysis": {"titulo_painel": "Media Analytics", "objetivo_macro": "Monitorar e comparar a performance de campanhas de mídia digital entre diferentes canais, com foco na análise mensal.", "perguntas_respondidas": ["Qual canal de mídia apresentou o melhor desempenho no mês selecionado?", "Como a performance de investimento (Spend), cliques e CPC variou em relação ao mês anterior para cada plataforma?", "Qual a tendência diária de impressões ao longo do mês para cada canal?", "Existe alguma anomalia ou pico de performance em algum dia específico do mês?"], "dominio_negocio": "Marketing", "elementos_visuais": "Estrutura de cartões comparativos por canal de mídia. Cada cartão contém um gráfico de linhas da tendência diária de impressões (mês atual vs. anterior) e cartões de KPI para os principais indicadores com a variação percentual.", "filtros_visiveis": ["Mês"], "principais_indicadores": ["Spend (Investimento)", "Clicks (Cliques)", "CPC (Custo por Clique)", "Impression (Impressões)"], "publico_sugerido": "Analista de Marketing"}, "screenshot_rel_path": "images/20260117_124925_01_target.png"}, {"id": 2, "label": "Next Page (2/2)", "filename": "02_target.png", "analysis": {"titulo_painel": "Análise do Público Alvo", "objetivo_macro": "Analisar o perfil demográfico, profissional e comportamental do público-alvo para otimizar estratégias de marketing e engajamento.", "perguntas_respondidas": ["Qual é a composição demográfica do nosso público em termos de gênero e faixa etária?", "Qual é a distribuição dos cargos profissionais dentro da audiência?", "Qual o score médio de engajamento e sua tendência?", "Qual a taxa de conversão geral do público analisado?", "Qual o volume total da audiência segmentada?"], "dominio_negocio": "Marketing", "elementos_visuais": "Painel com múltiplos cartões de KPI para visualização de métricas principais, incluindo um medidor radial para taxa de conversão, um gráfico de linhas para score, e gráficos de distribuição para cargos e faixa etária.", "filtros_visiveis": [], "principais_indicadores": ["Tamanho da Audiência", "Distribuição por Gênero", "Taxa de Conversão", "Distribuição por Cargo Profissional (Work Roles)", "Score Médio de Engajamento (Engage. score Avg.)", "Distribuição por Faixa Etária (Age Range)"], "publico_sugerido": "Analista de Mercado"}, "screenshot_rel_path": "images/20260117_124925_02_target.png"}]}];

        let currentCatalog = null;
        let currentPageIndex = 0;

        function init() {
            renderGrid(window.CATALOG_DATA);
            updateStats();
        }

        function updateStats() {
            document.getElementById('statsTotal').textContent = window.CATALOG_DATA.length;
            const totalPages = window.CATALOG_DATA.reduce((acc, cat) => acc + (cat.pages.length || 0), 0);
            document.getElementById('statsPages').textContent = totalPages;
        }

        function renderGrid(data) {
            const grid = document.getElementById('cardsGrid');
            grid.innerHTML = '';

            data.forEach((catalog, index) => {
                const firstPage = catalog.pages[0];
                const analysis = firstPage?.analysis || {};
                const title = analysis.titulo_painel || catalog.url;
                const domain = analysis.dominio_negocio || 'N/A';
                const time = new Date(catalog.timestamp).toLocaleDateString('pt-BR');
                const thumbnail = firstPage?.screenshot_rel_path || '';

                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => openModal(index);

                // Overlay text
                const objective = analysis.objetivo_macro || "Sem descrição disponível.";

                card.innerHTML = `
                    <div style="position: relative;">
                        <img src="${thumbnail}" class="card-image" loading="lazy">
                        <div class="card-overlay">
                            <div class="overlay-label">Objetivo</div>
                            <div class="overlay-text">${objective}</div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="card-title">${title}</div>
                        <div class="card-meta">
                            <span>${domain}</span>
                            <span class="badge">${catalog.pages.length} págs</span>
                        </div>
                        <div class="card-meta" style="margin-top: auto; padding-top: 0.5rem;">
                            <span>${time}</span>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterCatalogs() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = window.CATALOG_DATA.filter(c => {
                const text = JSON.stringify(c).toLowerCase();
                return text.includes(query);
            });
            renderGrid(filtered);
        }

        function openModal(index) {
            currentCatalog = window.CATALOG_DATA[index];
            currentPageIndex = 0;
            renderModalContent();
            document.getElementById('modalOverlay').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('active');
        }

        function renderModalContent() {
            if (!currentCatalog) return;

            const page = currentCatalog.pages[currentPageIndex];
            const analysis = page.analysis || {};

            // Image
            document.getElementById('modalMainImage').src = page.screenshot_rel_path;

            // Header
            document.getElementById('modalTitle').textContent = analysis.titulo_painel || "Sem Título";
            document.getElementById('modalDomain').textContent = `${analysis.dominio_negocio || 'Geral'} • Pág ${currentPageIndex + 1}/${currentCatalog.pages.length}`;

            // Link
            document.getElementById('modalLink').href = currentCatalog.url;

            // Text Fields
            document.getElementById('modalObjective').textContent = analysis.objetivo_macro || "Não disponível.";

            // Questions
            const qContainer = document.getElementById('modalQuestions');
            qContainer.innerHTML = '';
            (analysis.perguntas_respondidas || []).forEach(q => {
                const li = document.createElement('li');
                li.textContent = q;
                qContainer.appendChild(li);
            });

            // Metrics
            const mContainer = document.getElementById('modalMetrics');
            mContainer.innerHTML = '';
            (analysis.principais_indicadores || []).forEach(m => {
                const span = document.createElement('span');
                span.className = 'info-pill';
                span.textContent = m;
                mContainer.appendChild(span);
            });

            // Thumbs
            const tContainer = document.getElementById('modalThumbs');
            tContainer.innerHTML = '';
            currentCatalog.pages.forEach((p, idx) => {
                const img = document.createElement('img');
                img.src = p.screenshot_rel_path;
                img.className = `nav-thumb ${idx === currentPageIndex ? 'active' : ''}`;
                img.onclick = () => {
                    currentPageIndex = idx;
                    renderModalContent();
                };
                tContainer.appendChild(img);
            });
        }

        function nextPage() {
            if (currentCatalog && currentPageIndex < currentCatalog.pages.length - 1) {
                currentPageIndex++;
                renderModalContent();
            }
        }

        function prevPage() {
            if (currentCatalog && currentPageIndex > 0) {
                currentPageIndex--;
                renderModalContent();
            }
        }

        // Initialize
        if (window.CATALOG_DATA.length > 0) {
            init();
        } else {
            // Placeholder for dev mode testing
            // window.CATALOG_DATA = [...mockData];
            init();
        }
    </script>
</body>

</html>